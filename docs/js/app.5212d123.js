(function(t){function e(e){for(var r,o,u=e[0],s=e[1],c=e[2],p=0,d=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var s=n[u];0!==a[s]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("List",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("div",{attrs:{id:"report"}},t._l(t.trList,(function(e){return n("div",{key:"transactions-on-"+new Date(e[0].updated_at).toDateString(),staticClass:"date"},[n("div",[n("span",[t._v(t._s(t.getGroupDate(e[0].updated_at)))])]),n("ul",t._l(e,(function(r){return n("li",{key:r.event_id,staticClass:"transaction"},[n("details",[n("summary",[n("div",{staticClass:"order"},[t._v(" "+t._s(t.getType(r.type))+": "),n("b",[t._v(t._s(r.event_id))])]),n("div",{staticClass:"time"},[n("time",{attrs:{datetime:r.updated_at}},[t._v(" "+t._s(new Date(e[0].updated_at).toLocaleTimeString("ru",{minute:"2-digit",hour:"2-digit"}))+" ")])]),n("div",{staticClass:"account"},[t._v(t._s(t.getContacts(r)))]),n("div",{class:"amount "+t.getCurrency(r.currency)+" positive "},[t._v(t._s(r.amount))])]),r.description?n("p",{staticClass:"description"},[t._v(t._s(r.description))]):t._e()])])})),0)])})),0)])},u=[],s=(n("fb6a"),n("a434"),n("4d90"),n("96cf"),n("1da1")),c=n("bc3a"),l=n.n(c),p={name:"list",data:function(){return{trList:null}},methods:{getData:function(){var t=this,e="https://api.stage.capusta.space/v1/cabinet/protected/transactions/page/1",n={headers:{Authorization:"Bearer 5d370094-57a7-4476-ace4-4f29bfa43d44"}};l.a.get(e,n).then((function(e){var n;t.sortListByDate(null===(n=e.data)||void 0===n?void 0:n.result)})).catch((function(t){console.error({err1:t})}))},sortListByDate:function(t){var e=JSON.parse(JSON.stringify(t));e.sort((function(t,e){return new Date(e.updated_at)>new Date(t.updated_at)?1:new Date(e.updated_at)<new Date(t.updated_at)?-1:0})),this.splitListByDay(e)},splitListByDay:function(t){for(var e=JSON.parse(JSON.stringify(t)),n=null,a=[],i=0;i<e.length;i++){var o=e[i].updated_at;n?n!==new Date(o).toDateString()&&(a.push(i),n=new Date(o).toDateString()):n=new Date(o).toDateString()}for(var u=[],s=0,c=0;c<a.length;c++)u.push(e.splice(0,a[c]-s)),s+=a[c]-s;u.push(e),r["a"].set(this,"trList",u)},getGroupDate:function(t){var e=new Date,n=new Date(e.setDate(e.getDate()-1)),r=new Date(t),a=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),u=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear(),l=String(r.getDate()).padStart(2,"0"),p=String(r.getMonth()+1).padStart(2,"0"),d=r.getFullYear();return a===l&&i==p&&o===d?"Сегодня":u===l&&s==p&&c===d?"Вчера":r.toLocaleDateString("ru",{day:"2-digit",month:"2-digit",year:"2-digit"})},getCurrency:function(t){return"RUB"===t?" rubles ":" USD "},getContacts:function(t){var e;return t.account_number?t.account_number.slice(0,4)+" **** **** "+t.account_number.slice(-4):(null===(e=t.senderProperties)||void 0===e?void 0:e.email)||"-"},getType:function(t){var e="Транзакция";switch(t){case"REFUND":e="Возврат";break;case"PURCHASE_BILL":e="Счет";break;case"PURCHASE":e="Заказ";break;default:e="Транзакция";break}return e}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:case"end":return e.stop()}}),e)})))()}},d=p,f=n("2877"),g=Object(f["a"])(d,o,u,!1,null,null,null),v=g.exports,_={name:"App",components:{List:v}},h=_,y=(n("034f"),Object(f["a"])(h,a,i,!1,null,null,null)),b=y.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(b)}}).$mount("#app")},"85ec":function(t,e,n){}});
//# sourceMappingURL=app.5212d123.js.map